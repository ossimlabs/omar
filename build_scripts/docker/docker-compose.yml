version: '2'
services:
  o2-base:
    build: ./o2-base
    image: radiantbluetechnologies/o2-base
  postgresdb:
    environment:
      POSTGRES_PASSWORD: abc123
      POSTGRES_USER: postgres_user
      POSTGRES_DB: omar_prod
    image: postgres:latest
  # wmts:
  #   environment:
  #     DBHOST: postgresdb
  #     DBPORT: :5432
  #     DBNAME: omar_prod
  #     DBUSER: postgres_user
  #     DBPASS: abc123
  #     WFSSERVER: o2.ossim.org/o2
  #     WFSPORT: ""
  #     WMSSERVER: o2.ossim.org/o2
  #     WMSPORT: ""
  #     FOOTPRINTS: o2.ossim.org/o2
  #     FOOTPRINTSPORT: ""
  #   build: ./wmts-app
  #   ports:
  #     - "5000:8080"
  #   links:
  #     - postgresdb
  #   image: radiantbluetechnologies/wmts
  #   depends_on:
  #     - o2-base
  #     - postgresdb
  # sqs:
  #   build: ./sqs-app
  #   environment:
  #     AWSDNS: sqs.us-east-1.amazonaws.com
  #     AWSQUEUEPATH: 320588532383/avro-tst
  #     WAIT_TIME_SECONDS: 20
  #     NUMBER_OF_MESSAGES: 1
  #     POLLING_INTERVAL_SECONDS: 10
  #     DESTINATION_TYPE: stdout
  #     DESTINATION_POST_END_POINT: ""
  #     DESTINATION_POST_FIELD: message
  #   volumes:
  #     # Modify the path below to reflect your
  #     # AWS credentials location
  #     - /Users/<yourusername>/.aws:/root/.aws
  #   ports:
  #     - "8080"
  #   image: radiantbluetechnologies/sqs
  #   depends_on:
  #     - o2-base
  # avrodb:
  #   environment:
  #     POSTGRES_PASSWORD: abc123
  #     POSTGRES_USER: avro
  #     POSTGRES_DB: omar_prod
  #   image: postgres:latest
  avro:
    build: ./avro-app
    container_name: avro_container
    environment:
      DBHOST: postgresdb
      DBPORT: :5432
      DBNAME: omar_prod
      DBUSER: postgres_user
      DBPASS: abc123
      ADDRASTERENDPOINTURL: 10.0.10.181
      ADDRASTERENDPOINTPORT: :9999
    volumes:
      # Mount the data directory locally to the container
      - /Users/Shared/data://data
    ports:
      - "5000:8080"
    links:
      - postgresdb
    image: radiantbluetechnologies/avro
    depends_on:
      - o2-base
      - postgresdb
